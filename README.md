# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Базовые классы.
Класс Api:
Предоставляет интерефейс взаимодействия с сервером через http-запросы. Предоставляет методы для работы с сервером:
- get - делает GET запрос по указанному URI и возвращает обьект с данными ответа.
- post - делает POST запрос по указанному URI с переданными данными и методом запроса, возвращает обьект с данными ответа.

Класс Component:
Абстрактный класс для разработки компонентов пользовательского интерфейса.Предоставляет методы для управления DOM элементами:
- toggleClass - переключает класс.
- setText - устанавливает текстовое содержимое.
- setDisabled - сменяет статус блокировки.
- setHidden - скрывает элемент.
- setVisible - Показывает элемент.
- setImage - устанавливает изображение с альтернативным текстом.
- render - возвращает корневой DOM элемент.

Класс EventEmitter:
Позволяет генерировать и прослушивать события и устанавливать обработчики событий или событий с определенными именами.Методы:
- on - устанавливает обработчик на событие.
- off - удаляет обработчик события.
- emit - инициирует событие с данными.
- onAll - устанавливает обработчик для всех событий.
- offAll - удаляет все обработчики событий.
- trigger - создает триггер, который генерирует событие при вызове.

Класс Model: 
Абстрактный класс для формирования моделей данных и управления данными приложения.
Метод:
- emitChanges(Сообщает всем,что модель поменялась).

## Компоненты.
Класс larekApi наследуется от класса Api. компонент взаимодействия с сервером.

Класс Page наследуется от класса Component. Добавляет ленту и слушатель на элемент корзины.
Методы:
- set catalog - установка списка карточек на странице.
- set count - установка значения счетчика карточек в корзине.

Класс Card наследуется от класса Component и применяется для создания карточек.

Класс Modal наследуется от класса Component и применяется для отображения модальных окон.
методы:
- open - показыввает модальное окно и генерирует событие.
- close - закрывает, очищает и генерирует собитые модального окна.
- render - рендерит модальное окно с учетом переданных данных. 

Класс Basket наследуется от класса Component и применяется для показа корзины и товаров лежащих в ней.
Методы:
- set total - общая стоимость карточек в корзине.
- set items - список карточек в корзине.

Класс CardInBasket наследуется от класса Component применяется для отображения отдельной карточки в корзине.
методы:
- set index - показ позиции в списке.
- set price - показ цены.
- set title - показ названия товара.

Класс Form наследуется от класса Component, представляет компонент отображения основной формы.
методы:
- set valid - управление состояние кнопки отправки.
- set errors - установка текста ошибок валидации.
- inputChange - генерирует событие о измененном поле и его значении.
- render - обновляет состояние формы.

Класс DeliveryForm наследуется от класса Form, добавляет функционал для выбора способа оплаты и адреса доставки.

Класс ContactForm наследуется от класса Form, отображает форму ввода контактной информации.
методы: 
- set email - установка почты.
- set phone - установка номера телефона.

Класс SuccessOrder наследуется от класса Component, применяется для отображения успешности заказа и отображения суммы списания.
- set description - устанавливает текстовое описание покупки и сумарную сумму.

Класс StateApp наследуется от Model, главный класс управления всеми данными приложения, представляет собой централизованное хранилище состояния приложения.
методы:
- setCatalog - устанавливает каталог карточек.
- removeFromBasket - удаляет карточку из корзины.
- getTotalBasketPrice - вычисляет общую стоимость товаров в корзине.
- getCountCardBasket - выводит количество карточек в корзине.
- clearOrder - очищает заказы.
- addBasket - добавляет карточку в корзину.
- clearBasket - очищает корзину.
- validateOrder - валидирует данные заказа.
- validateContact - валидирует контактные данные.



## Типы данных.
//интерфейс контактов покупателя
interface IContactForm{
    email: string; // электронная почта покупателя
    phone: string; // номер телефона покупателя
}

//интерфейс способа оплаты и адреса
interface IDeliveryForm{
    payment: string; // способ оплаты 
    address: string; // адрес доставки
}

//интерфейс описывающий страницу 
interface IPage{
    counter: number; // количество товаров в корзине
    catalog: HTMLElement[]; //  массив карточек товаров
}

//интерфейс описывающий заказ
interface IOrder{
   items: string[]; // массив ID купленных товаров
   payment: string;  // способ оплаты
   total: number; // сумма заказа
   address: string; // адрес доставки
   phone: string; // телефонный номер покупателя
   email: string; // электронная почта покупателя
}

//интерфейс описывающий карточку товара
interface ICard{
    id: string; // идентификатор товара
    title: string; // название товара
    image: string; // ссылка на картинку товара
    description: string; // описание товара
    selected: boolean; // показывает добавлен ли товар в корзину
    category: string; //категория товара
    price: number|null; // цена
}

//интерфейс описывающий состояние приложения
interface IStateApp{
    catalog: ICard[]; // каталог товаров
    order: IOrder|null; //заказ
    basket: ICard[]; //корзина
    setCatalog(items: ICard[]): void; // устанавливает каталог карточек
    addBasket(item: ICard): void // добавляет в корзину 
    getTotalBasketPrice(): number // выводит общую стоимость товаров в корзине

}


